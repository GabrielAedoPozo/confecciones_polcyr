---
// Componente de header minimalista para Polcyr Confecciones
---
<header class="site-header">
	<nav class="nav" data-open="false">
		<a class="brand" href="/confecciones_polcyr/" aria-label="Inicio">
			<img src="/confecciones_polcyr/img/logo2.png" alt="Polcyr Confecciones" height="100" />
		</a>

		<button class="menu-toggle" aria-label="Abrir menÃº">â˜°</button>

		<ul class="nav-menu" id="navMenu">
			<li><a href="/confecciones_polcyr/" data-es="Inicio" data-en="Home">Inicio</a></li>
			<li><a href="/confecciones_polcyr/nosotros" data-es="Nosotros" data-en="About Us">Nosotros</a></li>
			<li><a href="/confecciones_polcyr/procesos" data-es="Procesos" data-en="Processes">Procesos</a></li>
			<li><a href="/confecciones_polcyr/clientes" data-es="Clientes" data-en="Clients">Clientes</a></li>
			<li><a href="/confecciones_polcyr/contacto" data-es="Contacto" data-en="Contact">Contacto</a></li>
		</ul>

		<div class="header-actions">
			<button class="language-toggle" id="languageToggle" aria-label="Cambiar idioma">
				<span class="lang-flag" id="currentFlag">ðŸ‡ªðŸ‡¸</span>
				<span class="lang-text" id="currentLang" data-es="ES" data-en="EN">ES</span>
			</button>
		</div>
	</nav>
</header>

<style>
	/* Solo estilos especÃ­ficos del menÃº mÃ³vil */
	@media (max-width: 768px) {
		.menu-toggle {
			display: block !important;
			z-index: 1002 !important;
		}
		
		.nav-menu {
			position: fixed !important;
			top: 0 !important;
			left: -100% !important;
			width: 85% !important;
			max-width: 300px !important;
			height: 100vh !important;
			background: white !important;
			flex-direction: column !important;
			justify-content: flex-start !important;
			align-items: flex-start !important;
			padding: 5rem 2rem 2rem !important;
			box-shadow: 2px 0 10px rgba(0,0,0,0.1) !important;
			transition: left 0.3s ease !important;
			z-index: 1001 !important;
			gap: 0 !important;
			overflow-y: auto !important;
		}
		
		.nav-menu.active {
			left: 0 !important;
		}
		
		.nav-menu li {
			width: 100% !important;
		}
		
		.nav-menu a {
			font-size: 1.1rem !important;
			padding: 1rem 0 !important;
			width: 100% !important;
			border-bottom: 1px solid #e2e8f0 !important;
			border-radius: 0 !important;
			display: block !important;
			text-decoration: none !important;
			color: #334155 !important;
			background: transparent !important;
			pointer-events: auto !important;
		}

		.nav-menu a:hover {
			color: var(--brand-blue) !important;
			background: rgba(6, 73, 167, 0.05) !important;
		}
	}

	@media (max-width: 480px) {
		.nav-menu {
			width: 90% !important;
			padding: 3rem 1.5rem 1.5rem !important;
		}
		
		.nav-menu a {
			font-size: 1.1rem !important;
			padding: 0.8rem 0 !important;
		}
	}
</style>

<script>
	// Funcionalidad del menÃº mÃ³vil simplificada
	function initMobileMenu() {
		const menuToggle = document.querySelector('.menu-toggle');
		const navMenu = document.getElementById('navMenu');
		
		if (!menuToggle || !navMenu) {
			console.log('Elementos del menÃº no encontrados');
			return;
		}
		
		// Crear overlay
		let overlay = document.querySelector('.menu-overlay');
		if (!overlay) {
			overlay = document.createElement('div');
			overlay.className = 'menu-overlay';
			document.body.appendChild(overlay);
		}
		
		function openMenu() {
			console.log('Abriendo menÃº');
			navMenu.classList.add('active');
			overlay.classList.add('active');
			document.body.style.overflow = 'hidden';
		}
		
		function closeMenu() {
			console.log('Cerrando menÃº');
			navMenu.classList.remove('active');
			overlay.classList.remove('active');
			document.body.style.overflow = '';
		}
		
		// Toggle menu
		menuToggle.addEventListener('click', function(e) {
			e.preventDefault();
			console.log('Click en toggle - Menu activo:', navMenu.classList.contains('active'));
			
			if (navMenu.classList.contains('active')) {
				closeMenu();
			} else {
				openMenu();
			}
		});
		
		// Cerrar con overlay
		overlay.addEventListener('click', closeMenu);
		
		// Cerrar con links
		navMenu.querySelectorAll('a').forEach(function(link) {
			link.addEventListener('click', closeMenu);
		});
		
		// Cerrar con Escape
		document.addEventListener('keydown', function(e) {
			if (e.key === 'Escape' && navMenu.classList.contains('active')) {
				closeMenu();
			}
		});
		
		// Cerrar al redimensionar
		window.addEventListener('resize', function() {
			if (window.innerWidth > 768) {
				closeMenu();
			}
		});
		
		console.log('MenÃº mÃ³vil inicializado correctamente');
	}

	// Sistema de traducciÃ³n
	class LanguageManager {
		constructor() {
			this.currentLanguage = localStorage.getItem('language') || 'es';
			this.init();
		}

		init() {
			this.updateLanguageButton();
			this.translatePage();
			
			const languageToggle = document.getElementById('languageToggle');
			if (languageToggle) {
				languageToggle.addEventListener('click', () => {
					this.toggleLanguage();
				});
			}
		}

		toggleLanguage() {
			this.currentLanguage = this.currentLanguage === 'es' ? 'en' : 'es';
			localStorage.setItem('language', this.currentLanguage);
			this.updateLanguageButton();
			this.translatePage();
			
			window.dispatchEvent(new CustomEvent('languageChanged', {
				detail: { language: this.currentLanguage }
			}));
		}

		updateLanguageButton() {
			const flag = document.getElementById('currentFlag');
			const text = document.getElementById('currentLang');
			
			if (flag && text) {
				if (this.currentLanguage === 'es') {
					flag.textContent = 'ðŸ‡ªðŸ‡¸';
					text.textContent = 'ES';
				} else {
					flag.textContent = 'ðŸ‡ºðŸ‡¸';
					text.textContent = 'EN';
				}
			}
		}

		translatePage() {
			document.querySelectorAll('[data-es]').forEach(element => {
				const esText = element.getAttribute('data-es');
				const enText = element.getAttribute('data-en');
				
				if (this.currentLanguage === 'es' && esText) {
					element.textContent = esText;
				} else if (this.currentLanguage === 'en' && enText) {
					element.textContent = enText;
				}
			});
		}
	}

	// Inicializar
	document.addEventListener('DOMContentLoaded', function() {
		console.log('DOM cargado');
		new LanguageManager();
		initMobileMenu();
	});

	window.LanguageManager = LanguageManager;
</script>