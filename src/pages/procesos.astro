---
import Layout from '../layouts/Layout.astro';
import Header from '../components/header.astro';
import Footer from '../components/footer.astro';
import "../styles/style.css";
---

<Layout title="Procesos - Confecciones POLCYR">
	<Header />

	<header class="page-header procesos-hero-header">
		<div class="page-header__inner">
			<h1 class="page-header__title" data-es="Nuestros Procesos" data-en="Our Processes">Nuestros Procesos</h1>
		</div>
	</header>

	<main class="processes-page">
		<section class="timeline-section">
			<div class="container">
				<div class="section-intro">
					<h2 data-es="Nuestro Proceso Productivo" data-en="Our Production Process">Nuestro Proceso Productivo</h2>
					<p data-es="Cada etapa está diseñada para garantizar máxima calidad, eficiencia y atención al detalle en todas las prendas que producimos." data-en="Each stage is designed to ensure maximum quality, efficiency and attention to detail in all the garments we produce.">Cada etapa está diseñada para garantizar máxima calidad, eficiencia y atención al detalle en todas las prendas que producimos.</p>
				</div>

				<div class="timeline">
					<!-- Step 01 -->
					<div class="timeline-item" data-step="1">
						<div class="timeline-marker">
							<div class="step-number">01</div>
							<div class="icon-badge">
								<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3l-6 6 2 2 7-7z"/></svg>
							</div>
						</div>
						<div class="timeline-card">
							<div class="card-header">
								<h3 data-es="Tejedora – Producción de telas" data-en="Weaving – Fabric Production">Tejedora – Producción de telas</h3>
								<span class="badge" data-es="Paso 1" data-en="Step 1">Paso 1</span>
							</div>
							<p data-es="Fabricamos telas resistentes y de alta calidad, adaptadas a cada diseño. Nuestras tejedoras garantizan materiales uniformes, duraderos y listos para las siguientes etapas de producción." data-en="We manufacture strong, high-quality fabrics adapted to each design. Our weaving machines ensure uniform, durable materials ready for the next stages.">Fabricamos telas resistentes y de alta calidad, adaptadas a cada diseño. Nuestras tejedoras garantizan materiales uniformes, duraderos y listos para las siguientes etapas de producción.</p>
							<div class="process-image">
								<img src="/confecciones_polcyr/img/p1.jpg" alt="Tejedora Industrial" />
								<div class="image-overlay"><span data-es="Tejeduría Industrial" data-en="Industrial Weaving">Tejeduría Industrial</span></div>
							</div>
						</div>
					</div>

					<!-- Step 02 -->
					<div class="timeline-item" data-step="2">
						<div class="timeline-marker">
							<div class="step-number">02</div>
							<div class="icon-badge">
								<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19.5 3.5L18 5l1.5 1.5L21 5zM11.5 9.5L2 19v3h3l9.5-9.5z"/></svg>
							</div>
						</div>
						<div class="timeline-card">
							<div class="card-header">
								<h3 data-es="Corte – Preparación de piezas" data-en="Cutting – Piece Preparation">Corte – Preparación de piezas</h3>
								<span class="badge" data-es="Paso 2" data-en="Step 2">Paso 2</span>
							</div>
							<p data-es="Cada pieza se corta con precisión siguiendo los patrones establecidos, asegurando exactitud en tamaños y formas. Este paso es esencial para mantener la consistencia y calidad de las prendas finales." data-en="Each piece is precisely cut following established patterns, ensuring accuracy in sizes and shapes. This step is essential to maintain consistency and quality in the final garments.">Cada pieza se corta con precisión siguiendo los patrones establecidos, asegurando exactitud en tamaños y formas. Este paso es esencial para mantener la consistencia y calidad de las prendas finales.</p>
							<div class="process-image">
								<img src="/confecciones_polcyr/img/tendedora.webp" alt="Corte de piezas" />
								<div class="image-overlay"><span data-es="Corte de Precisión" data-en="Precision Cutting">Corte de Precisión</span></div>
							</div>
						</div>
					</div>

					<!-- Step 03 -->
					<div class="timeline-item" data-step="3">
						<div class="timeline-marker">
							<div class="step-number">03</div>
							<div class="icon-badge">
								<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01z"/></svg>
							</div>
						</div>
						<div class="timeline-card">
							<div class="card-header">
								<h3 data-es="Confección – Ensamble de prendas" data-en="Sewing – Garment Assembly">Confección – Ensamble de prendas</h3>
								<span class="badge" data-es="Paso 3" data-en="Step 3">Paso 3</span>
							</div>
							<p data-es="Combinamos la experiencia de nuestro equipo con maquinaria especializada para ensamblar cada prenda. Costuras y detalles se revisan con cuidado para garantizar acabados de alta calidad." data-en="We combine our team's experience with specialized machinery to assemble each garment. Seams and details are carefully reviewed to ensure high-quality finishes.">Combinamos la experiencia de nuestro equipo con maquinaria especializada para ensamblar cada prenda. Costuras y detalles se revisan con cuidado para garantizar acabados de alta calidad.</p>
							<div class="process-image">
								<img src="/confecciones_polcyr/img/tendedora2.webp" alt="Confección de prendas" />
								<div class="image-overlay"><span data-es="Confección Especializada" data-en="Specialized Sewing">Confección Especializada</span></div>
							</div>
						</div>
					</div>

					<!-- Step 04 -->
					<div class="timeline-item" data-step="4">
						<div class="timeline-marker">
							<div class="step-number">04</div>
							<div class="icon-badge">
								<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/></svg>
							</div>
						</div>
						<div class="timeline-card">
							<div class="card-header">
								<h3 data-es="Estampado – Personalización" data-en="Printing – Customization">Estampado – Personalización</h3>
								<span class="badge" data-es="Paso 4" data-en="Step 4">Paso 4</span>
							</div>
							<p data-es="Realizamos estampados nítidos y duraderos utilizando equipos modernos. Cada prenda se personaliza con precisión, asegurando que los colores, logos y diseños corporativos reflejen la identidad de la marca de manera uniforme y consistente." data-en="We make sharp and durable prints using modern equipment. Each garment is customized with precision to ensure colors, logos and corporate designs consistently reflect the brand identity.">Realizamos estampados nítidos y duraderos utilizando equipos modernos. Cada prenda se personaliza con precisión, asegurando que los colores, logos y diseños corporativos reflejen la identidad de la marca de manera uniforme y consistente.</p>
							<div class="process-image">
								<img src="/confecciones_polcyr/img/p2.jpg" alt="Estampadora textil" />
								<div class="image-overlay"><span data-es="Estampado Digital" data-en="Digital Printing">Estampado Digital</span></div>
							</div>
						</div>
					</div>

					<!-- Step 05 -->
					<div class="timeline-item" data-step="5">
						<div class="timeline-marker">
							<div class="step-number">05</div>
							<div class="icon-badge">
								<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
							</div>
						</div>
						<div class="timeline-card">
							<div class="card-header">
								<h3 data-es="Horno de secado – Acabado final" data-en="Drying Oven – Final Finish">Horno de secado – Acabado final</h3>
								<span class="badge badge-success" data-es="Finalización" data-en="Completion">Finalización</span>
							</div>
							<p data-es="El secado controlado permite que cada prenda mantenga su textura, color y forma. Esta etapa asegura un acabado uniforme y una presentación impecable antes de la entrega final." data-en="Controlled drying allows each garment to maintain its texture, color and shape. This stage ensures a uniform finish and impeccable presentation before delivery.">El secado controlado permite que cada prenda mantenga su textura, color y forma. Esta etapa asegura un acabado uniforme y una presentación impecable antes de la entrega final.</p>
							<div class="process-image">
								<img src="/confecciones_polcyr/img/p3.jpg" alt="Horno de secado" />
								<div class="image-overlay"><span data-es="Secado y Acabado" data-en="Drying & Finishing">Secado y Acabado</span></div>
							</div>
						</div>
					</div>

				</div>
			</div>
		</section>

		<section class="cta-section">
			<div class="container">
				<div class="cta-content">
					<h2 data-es="¿Quieres conocer más sobre nuestros procesos?" data-en="Want to know more about our processes?">¿Quieres conocer más sobre nuestros procesos?</h2>
					<p data-es="Nuestro equipo técnico puede asesorarte y adaptar el proceso a tus requerimientos."
					   data-en="Our technical team can advise you and adapt the process to your requirements.">
						Nuestro equipo técnico puede asesorarte y adaptar el proceso a tus requerimientos.
					</p>
					<a class="cta-button" href="/confecciones_polcyr/contacto" data-es="Contactar Ahora" data-en="Contact Now">Contactar Ahora</a>
				</div>
			</div>
		</section>
	</main>

	<Footer />
</Layout>

<style is:global>
	/* Estilos para el hero de 100vh */
	.procesos-hero-header {
		height: 100vh !important;
		max-height: none !important;
		border-radius: 0 !important;
		justify-content: flex-start !important;
		text-align: left !important;
		background-image: url('/confecciones_polcyr/img/procesos2.png') !important;
		background-size: cover !important;
		background-position: center !important;
	}

	.procesos-hero-header::before,
	.procesos-hero-header::after {
		background: rgba(0, 0, 0, 0.4) !important; /* Overlay oscuro para legibilidad */
	}

	.procesos-hero-header .page-header__inner {
		padding: 0 2rem !important;
		margin-left: clamp(2rem, 5vw, 4rem) !important;
		max-width: 800px !important;
	}

	.procesos-hero-header .page-header__title {
		font-size: clamp(3rem, 8vw, 5rem) !important;
		text-transform: uppercase !important;
	}

	.procesos-hero-header .page-header__subtitle {
		display: none;
	}

	/* HARD RESET: forzar estilos de proceso con !important si es necesario */
	.processes-page { margin-top: 0 !important; } /* Eliminado el margen superior */
	.processes-page .container { max-width: 960px !important; margin: 0 auto !important; padding: 0 2rem !important; } /* reducir de 1200px a 960px */

	/* Header mejorado con overlay más claro */
	.processes-page .page-header { position: relative !important; padding: 6rem 2rem !important; overflow: hidden !important; }
	.processes-page .page-header::before {
		content: '' !important; position: absolute !important; inset: 0 !important;
		background: linear-gradient(135deg, rgba(6,73,167,0.342), rgba(15,87,191,0.85)) !important;
		z-index: 0 !important;
	}
	.processes-page .page-header::after {
		content: '' !important; position: absolute !important; inset: 0 !important;
		background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.15), transparent 60%) !important;
		z-index: 0 !important;
	}
	.processes-page .page-header__inner { position: relative !important; z-index: 1 !important; }

	/* Intro */
	.processes-page .section-intro { text-align: center !important; max-width: 800px !important; margin: 0 auto 5rem !important; }
	.processes-page .section-intro h2 {
		font-size: clamp(2rem, 5vw, 2.8rem) !important; color: #0649a7 !important;
		margin: 0 0 1rem !important; font-weight: 700 !important;
	}
	.processes-page .section-intro p { font-size: 1.15rem !important; color: #475569 !important; line-height: 1.7 !important; }

	.processes-page .timeline-section { 
		padding: 5rem 0 !important; 
		/* padding-top: 160px !important; */ /* Eliminado para que no haya espacio extra */
		background: linear-gradient(180deg, #fff, #f8fafc) !important;
		position: relative !important;
	}

	/* Patrón cuadriculado más visible */
	.processes-page .timeline-section::before {
		content: "" !important;
		position: absolute !important;
		inset: 0 !important;
		background-image: 
			linear-gradient(90deg, rgba(6,73,167,0.08) 2px, transparent 2px),
			linear-gradient(180deg, rgba(6,73,167,0.08) 2px, transparent 2px) !important;
		background-size: 50px 50px !important;
		pointer-events: none !important;
		z-index: 0 !important;
	}

	.processes-page .timeline { 
		position: relative !important; 
		display: flex !important; 
		flex-direction: column !important; 
		gap: 3.5rem !important;
		z-index: 1 !important; /* asegurar que esté encima del grid */
	}

	.processes-page .timeline-item {
		display: grid !important; grid-template-columns: auto 1fr !important; gap: 2rem !important; align-items: start !important;
		opacity: 0 !important; transform: translateY(24px) !important; transition: all 0.6s cubic-bezier(.25,.8,.25,1) !important;
	}
	.processes-page .timeline-item.visible { opacity: 1 !important; transform: translateY(0) !important; }

	/* Marker */
	.processes-page .timeline-marker {
		position: relative !important; display: flex !important; flex-direction: column !important;
		align-items: center !important; gap: 0.75rem !important; z-index: 2 !important;
	}
	.processes-page .step-number {
		width: 52px !important; height: 52px !important; border-radius: 50% !important; display: grid !important; place-items: center !important;
		background: linear-gradient(135deg, #0649a7, #1565d8) !important;
		color: #fff !important; font-weight: 800 !important; font-size: 1.15rem !important;
		box-shadow: 0 8px 24px rgba(6,73,167,0.35), 0 0 0 6px #fff !important;
	}
	.processes-page .icon-badge {
		width: 40px !important; height: 40px !important; border-radius: 50% !important; background: #fff !important; color: #0649a7 !important;
		display: grid !important; place-items: center !important; box-shadow: 0 4px 16px rgba(0,0,0,0.08) !important;
	}

	/* Card */
	.processes-page .timeline-card {
		background: #fff !important; border-radius: 20px !important; padding: 2.25rem !important; position: relative !important;
		box-shadow: 0 8px 32px rgba(0,0,0,0.06) !important; border: 1px solid rgba(6,73,167,0.08) !important;
		transition: all 0.3s ease !important;
	}
	.processes-page .timeline-item:hover .timeline-card {
		transform: translateY(-4px) !important; box-shadow: 0 16px 48px rgba(0,0,0,0.12) !important;
	}
	.processes-page .timeline-card::before {
		content: '' !important; position: absolute !important; top: 0 !important; left: 0 !important; right: 0 !important; height: 4px !important;
		background: linear-gradient(90deg, #0649a7, #1565d8) !important;
		border-radius: 20px 20px 0 0 !important;
	}

	.processes-page .card-header { display: flex !important; justify-content: space-between !important; align-items: center !important; margin-bottom: 1rem !important; }
	.processes-page .card-header h3 { margin: 0 !important; font-size: 1.5rem !important; color: #1e293b !important; font-weight: 600 !important; }
	.processes-page .badge {
		display: inline-block !important; padding: 0.35rem 0.85rem !important; border-radius: 999px !important; font-size: 0.8rem !important; font-weight: 700 !important;
		background: rgba(6,73,167,0.1) !important; color: #0649a7 !important;
	}
	.processes-page .badge-success { background: rgba(16,185,129,0.1) !important; color: #10b981 !important; }

	.processes-page .timeline-card > p { margin: 0 0 1.5rem !important; color: #475569 !important; line-height: 1.7 !important; font-size: 1.05rem !important; }

	/* Imagen más alta */
	.processes-page .process-image {
		position: relative !important; border-radius: 12px !important; overflow: hidden !important; box-shadow: 0 8px 24px rgba(0,0,0,0.08) !important;
	}
	.processes-page .process-image img { width: 100% !important; height: 420px !important; object-fit: cover !important; transition: transform 0.4s ease !important; } /* aumentar de 320px a 420px */
	.processes-page .timeline-item:hover .process-image img { transform: scale(1.05) !important; }

	.processes-page .image-overlay {
		position: absolute !important; inset: 0 !important; background: linear-gradient(180deg, transparent 50%, rgba(0,0,0,0.75)) !important;
		display: grid !important; place-items: end !important; padding: 1.25rem !important; opacity: 0 !important; transition: opacity 0.3s ease !important;
	}
	.processes-page .timeline-item:hover .image-overlay { opacity: 1 !important; }
	.processes-page .image-overlay span { color: #fff !important; font-weight: 600 !important; font-size: 1.05rem !important; }

	/* CTA */
	.processes-page .cta-section {
		padding: 5rem 2rem !important; background: linear-gradient(135deg, #0649a7, #1565d8) !important;
		color: #fff !important; position: relative !important; overflow: hidden !important;
	}
	.processes-page .cta-section::before {
		content: '' !important; position: absolute !important; top: -50% !important; right: -20% !important; width: 600px !important; height: 600px !important;
		background: radial-gradient(circle, rgba(255,255,255,0.1), transparent 70%) !important; border-radius: 50% !important;
	}
	.processes-page .cta-content { position: relative !important; z-index: 1 !important; text-align: center !important; }
	.processes-page .cta-content h2 { font-size: clamp(2rem, 5vw, 2.8rem) !important; margin: 0 0 1rem !important; }
	.processes-page .cta-content p { font-size: 1.15rem !important; max-width: 600px !important; margin: 0 auto 2rem !important; opacity: 0.95 !important; }
	.processes-page .cta-button {
		display: inline-block !important; padding: 1rem 2.5rem !important; border-radius: 999px !important; background: #fff !important; color: #0649a7 !important;
		font-weight: 700 !important; font-size: 1.1rem !important; text-decoration: none !important; transition: all 0.3s ease !important;
		box-shadow: 0 8px 24px rgba(0,0,0,0.15) !important;
	}
	.processes-page .cta-button:hover { transform: translateY(-2px) !important; box-shadow: 0 12px 32px rgba(0,0,0,0.2) !important; }

	/* Responsive */
	@media (max-width: 768px) {
		.processes-page .timeline::before { left: 1.75rem !important; }
		.processes-page .timeline-item { grid-template-columns: auto !important; gap: 1rem !important; }
		.processes-page .timeline-marker { flex-direction: row !important; justify-self: start !important; }
		.processes-page .step-number { width: 44px !important; height: 44px !important; }
		.processes-page .icon-badge { width: 36px !important; height: 36px !important; }
		.processes-page .process-image img { height: 280px !important; } /* mantener proporcional en móvil */
	}
</style>

<script is:inline>
	// Traductor para la página de procesos
	function translateProcessesPage() {
		const language = localStorage.getItem('language') || 'es';
		document.querySelectorAll('[data-es]').forEach(element => {
			const esText = element.getAttribute('data-es');
			const enText = element.getAttribute('data-en');
			if (language === 'es' && esText) element.textContent = esText;
			else if (language === 'en' && enText) element.textContent = enText;
		});
	}

	// Animación de entrada al hacer scroll
	function initTimelineAnimation() {
		const observer = new IntersectionObserver((entries) => {
			entries.forEach((entry, index) => {
				if (entry.isIntersecting) {
					setTimeout(() => {
						entry.target.classList.add('visible');
					}, index * 150);
				}
			});
		}, { threshold: 0.15 });

		document.querySelectorAll('.timeline-item').forEach(item => {
			observer.observe(item);
		});
	}

	// Escuchar cambios de idioma
	window.addEventListener('languageChanged', translateProcessesPage);

	// Inicializar cuando el DOM esté listo
	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', () => {
			translateProcessesPage();
			initTimelineAnimation();
		});
	} else {
		translateProcessesPage();
		initTimelineAnimation();
	}
</script>
